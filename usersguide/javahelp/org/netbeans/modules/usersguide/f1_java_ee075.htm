<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>Writing Ant Targets for Web Services on the Tomcat Web Server</title>
<link rel="stylesheet" href="ide.css" title="Oracle BLAFDoc" type="text/css"/>
</head>

<body>
<p><a id="tomcat_websvc" name="tomcat_websvc"></a></p>
<!-- infolevel="all" infotype="General" --><a id="sthref652" name="sthref652"></a>
<h1>Writing Ant Targets for Web Services on the Tomcat Web Server</h1>
<a name="BEGIN" id="BEGIN"></a>
<p>When working with web services on the Tomcat Web Server, you are recommended to use the However, the JWSDP-compliant Tomcat Web Server is based on Tomcat Web Server 5.0.19. Therefore, if you want to use a version of the Tomcat Web Server that is higher than 5.0.19, you cannot use JWSDP 1.6. Instead, you need to write Ant targets in the IDE, as described below.</p>
<a id="sthref653" name="sthref653"></a>
<p><b>To prepare to use Ant targets to deploy a web service on the Tomcat Web Server:</b></p>
<p>Copy all JAR files from $NB_HOME/ide/modules/ext/jaxrpc16 to $NB_HOME/enterprise/apache-tomcat-5.5.17/common/lib.</p>
<p>Make sure that the GlassFish server is registered in the IDE.</p>
<p>In the Services window (Ctrl-5), expand the Servers node, right-click the Tomcat Web Server node, and choose Start. Doing this creates the full_path_to_$NB_USER_DIR/5.0/apache-tomcat-5.5.17_base folder. In this folder, enable the Tomcat Web Server's auto deploy functionality by switching autoDeploy="false" to autoDeploy="true" in the conf/server.xml folder. Right-click the Tomcat Web Server node and choose restart so that the server can load your change.</p>
<a id="sthref654" name="sthref654"></a>
<p><b>To create the web service or client files:</b></p>
<ol>
<li>Create a web application project. Set the GlassFish server as your target server.</li>
<li>
<p>Do one of the following:</p>
<ul>
<li>If you want to deploy a web service, create the web service. For deployment, follow the instructions in 'To write Ant targets to deploy a web service on the Tomcat Web Server' below.</li>
<li>
<p>If you want to consume a web service, create the web service client. Make sure that you select IDE-generated static stub in the Specify Web Service Client information page. Now add the following target to the build.xml file and then follow the instructions in ' below:</p>
<pre xml:space="preserve">
&lt;target name="-pre-init"&gt;
  &lt;property name="j2ee.platform.wscompile.classpath" value="${libs.jaxrpc16.classpath}"/&gt;
&lt;/target&gt;
</pre></li>
</ul>
</li>
</ol>
<a id="sthref655" name="sthref655"></a>
<p><b>To write Ant targets to deploy a web service on the Tomcat Web Server:</b></p>
<ol>
<li>
<p>Add the following target to the build.xml file and change full_path_to_$NB_USER_DIR to the full path, such as c:\.netbeans:</p>
<pre xml:space="preserve">
&lt;target name="-pre-init"&gt;
  &lt;property name="j2ee.platform.wscompile.classpath" value="${libs.jaxrpc16.classpath}"/&gt;
  &lt;property name="tomcat.home" value="full_path_to_$NB_USER_DIR/5.0/apache-tomcat-5.5.17_base"/&gt;
&lt;/target&gt;
The apache-tomcat-5.5.17_base folder is created only once the Tomcat Web Server has been started.
</pre></li>
<li>
<p>Add the following target to the build.xml file:</p>
<pre xml:space="preserve">
&lt;target name="run-deploy" depends="init,compile,compile-jsps,-do-compile-single-jsp,dist"&gt;
 &lt;property name="raw.war.name" value="${dist.dir}/raw-${war.name}"/&gt;
 &lt;copy file="${dist.war}" tofile="${raw.war.name}"/&gt;
 &lt;delete file="${dist.war}"/&gt;
 &lt;taskdef name="wsdeploy" classname="com.sun.xml.rpc.tools.ant.Wsdeploy" classpath="${wscompile.classpath}"/&gt;
 &lt;wsdeploy
   inWarFile="${raw.war.name}"
   outWarFile="${dist.war}"
   fork="true"
   classpath="${wscompile.classpath}:${build.classes.dir.real}:${javac.classpath}"
   keep="true"
   verbose="true"
   source="1.1.2"/&gt;
 &lt;delete file="${raw.war.name}"/&gt;
 &lt;copy file="${dist.war}" todir="${tomcat.home}/webapps"/&gt;
&lt;/target&gt;
</pre></li>
<li>
<p>Add the following target to the build.xml file and change my-host to your environment's host name and change my-port-number to your environment's port number:</p>
<pre xml:space="preserve">
&lt;target name="run-display-browser" if="do.display.browser" depends="run-deploy"&gt;
   &lt;nbbrowse url="http://my-host:my-port-number/${ant.project.name}/${client.urlPart}"/&gt;
&lt;/target&gt;
</pre>
<p>Create an XML document in the WEB-INF folder. Call the XML document jaxrpc-ri. Add this content to jaxrpc-ri.xml and change mypackage.mysubpackage.myclassSEI to the fully qualified name of the SEI class and mypackage.mysubpackage.myclassImpl to the fully qualified name of the implementation class:</p>
<pre xml:space="preserve">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;webServices
    xmlns="http://java.sun.com/xml/ns/jax-rpc/ri/dd"
    version="1.0"
    targetNamespaceBase="http://java.sun.com/xml/ns/jax-rpc/wsi/wsdl"
    typeNamespaceBase="http://java.sun.com/xml/ns/jax-rpc/wsi/types"
    urlPatternBase="/webservice"&gt;
    &lt;endpoint
    name="MyTomcatWS"
    displayName="TomcatService"
    description="Tomcat Web Service endpoint"
    interface="mypackage.mysubpackage.myclassSEI"
    implementation="mypackage.mysubpackage.myclassImpl"/&gt;
    &lt;endpointMapping
    endpointName="MyTomcatWS"
    urlPattern="/MyTomcatWS"/&gt;
&lt;/webServices&gt;
</pre>
<p>Now right-click the project node, choose Properties, select the Run pane, and type MyTomcatWS in Relative URL.</p>
</li>
</ol>
<a id="sthref656" name="sthref656"></a>
<p><b>To deploy a web service or web service client on the Tomcat Web Server:</b></p>
<ol>
<li>Right-click the project node, choose Properties, select the Run pane, and select the Tomcat Web Server from the Server drop-down list.</li>
<li>Right-click the project node and choose Build Project.</li>
<li>
<p>Do one of the following:</p>
<p>For web service clients, make sure that you selected the IDE-generated static stub in the Client Type drop-down list when you used the New Web Service Client wizard.</p>
<p>For web services, you must start the server manually. In the Services window (Ctrl-5), right-click the Tomcat Web Server instance node and choose Start.</p>
</li>
<li>If you are behind a corporate firewall, .</li>
<li>In the Projects window, right-click the project and choose Run Project.</li>
</ol>
<p>The web service deploys and is displayed in the browser, using the host name and port number specified in the &lt;run-display-browser&gt; target.</p>
<hr><p><b>Related Topics</b></p>
<p>About the Tomcat Web Server</p>
<p>Authenticating the Tomcat Web Server</p>
<p>Setting Up a Tomcat Database Connection Pool</p>

<!-- -->
<!-- Start Footer -->


<table summary="" cellspacing="0" cellpadding="0" width="100%">
<tr>
<td align="left" width="86%"><a href="legal_notice.htm">
Copyright&nbsp;&copy;&nbsp;2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.</a>
</td>
</tr>
</table>
<!-- -->
</body>
</html>
