<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!--       
*     Copyright Â© 1997, 2011, Oracle and/or its affiliates. All rights reserved.
*     Use is subject to license terms.
-->
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <title>Profiling a Free-form Project</title>
        <link rel="StyleSheet" href="nbdocs://org.netbeans.modules.usersguide/org/netbeans/modules/usersguide/ide.css" type="text/css">
    </head>
    <body>
   <h2>Profiling a Free-form Project</h2>
      <p>In a free-form project, you have to create Ant targets to be able to profile a file or project.
      You generally want one target in your free-form project's build script
      for profiling a project and one target for profiling individual files.
      The first time that you choose the <tt>&quot;Profile Project&quot;</tt> or 
      <tt>&quot;Profile File&quot;</tt> command on a free-form project
      you will need to create the targets.
      The IDE can create the targets for you based on the information for the target that is 
      mapped to the Run command for the project.</p>
    
      <p>To profile a free-form project perform the following steps.</p>
      
      <ol>
        <li>Set the free-form project as the main project by choosing
            Run &gt; Set Main Project in the main menu and selecting the project.</li>
        <li>Choose Profile &gt; Profile Main Project.</li>
        <li>Click Generate in the Profile Project dialog box.</li>
        <li>Right-click the project's node and choose Profile Project.</li>
        <li>Configure the profiling session in the Select Profiling Task dialog.
            Click Run.</li>
      </ol>

        <p class="note"><b>Notes.</b></p>
        <ul>
            <li>When you click Generate in the Profile Project dialog box the IDE creates
        a build script named <tt>ide-targets.xml</tt> and generates a target named 
        <tt>profile-nb</tt>.
        You should verify that the generated <tt>profile-nb</tt> target properly 
        takes into account all of the elements of your project. 
        In some cases you might need to modify the <tt>&lt;classpath&gt;</tt> argument 
        in the target if it does not include all of the items in your run classpath.</li>
        
        <li>The IDE also modifies <tt>project.xml</tt> to map the <tt>profile-nb</tt> target to
        the Profile Project command in the IDE.
        If you write the target from scratch you will need to also create this mapping yourself. </li>
      </ul>
        
    <p>For example, the <tt>profile-nb</tt> target that the IDE generates in <tt>ide-targets.xml</tt> might
        look similar to the following.</p>

<pre class="examplecode">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
    &lt;project basedir=".." name="<i>YourProjectName</i>"&gt;
        &lt;import file="../build.xml"/&gt;
        &lt;target name="-profile-check"&gt;
            &lt;startprofiler freeform="true"/&gt;
        &lt;/target&gt;
        &lt;!-- TODO: edit the following target according to your needs --&gt;
        &lt;target name="profile-nb" if="profiler.configured" depends="-profile-check"&gt;
            &lt;java classname="${mainclass}" dir="." fork="true"&gt;
                &lt;classpath&gt;
                    &lt;pathelement path="<i>ClasspathSpecifiedInYourRunTarget</i>"/&gt;
                &lt;/classpath&gt;
                &lt;jvmarg line="${agent.jvmargs}"/&gt;
            &lt;/java&gt;
        &lt;/target&gt;
    &lt;/project&gt;</pre>
    
    <p>In this example the IDE attempted to guess the runtime classpath for the project.</p>
    
    <p>If you do not have a run target mapped or the IDE otherwise cannot determine 
    the project's classpath or main class, the generated profile target includes "TODO" placeholders 
    for you to fill in these values.</p>


    <h3>Profiling Free-form Web Projects</h3>
    <p>Typically the server is started using a startup script, not the <tt>java</tt> command directly. 
    Therefore you cannot use the <code>&lt;jvmarg .../&gt;</code> element to pass additional argument to it.
    Instead, you have to modify the server startup script to configure it for profiling.</p>
    
    <p>The recommended approach is to create a new script for starting the server for 
    profiling and use it in the <code>profile</code> target. 
    The Attach wizard can generate the necessary modified startup script. 
    If your target server does not support automatic integration, you can 
    create the script manually by following the manual integration steps described in the wizard. 
    You always have to set up the integration for Local Direct attach.</p>
    
    <p>The other steps for profiling a free-form web project are the same as those above for profiling
    a standard J2SE projects.</p>

        
    <p>For more about how to profile a free-form project and arguments you can use, see the following document
        on configuring free-form projects.</p>
    <p><object classid="java:org.netbeans.modules.javahelp.BrowserDisplayer">
    <param name="content" value="http://netbeans.org/kb/articles/freeform-config.html#profilej2se">
    <param name="text" value="<html><u>Creating a Target to Profile Your Java SE Application</u></html>">
    <param name="textFontSize" value="medium">
    <param name="textColor" value="blue">
    </object></p>
        
        
        <dl>
            <dt><a name="seealso">See Also</a></dt>
            <dd><a href="profile_attach.html">Profiling Using Attach Mode</a></dd>
        </dl>
        <hr>
        <small><a href="../credits.html">Legal Notices</a></small>
        <table border="0" cellpadding="50">
        <tr><td>&nbsp;</td></tr>
    </table>
        
    </body>
</html>
